<view class="container">
  <view class="top-bg"></view>
  <view class="order-card">
    <view class="card-header">
      <text class="title">订单信息</text>
      <view class="status-tag">{{statusText}}</view>
    </view>
    <view class="card-body">
      <view class="row">
        <text class="label">订单号</text>
        <text class="value copyable">{{orderNo}}</text>
      </view>
      <view class="row">
        <text class="label">客户名称</text>
        <text class="value">{{customerName}}</text>
      </view>
      <view class="row">
        <text class="label">订单金额</text>
        <text class="value money">¥{{rmbAmount}}</text>
      </view>
      <view class="row">
        <text class="label">下单日期</text>
        <text class="value">{{orderDate}}</text>
      </view>
    </view>
  </view>

  <view class="section-title" wx:if="{{deliveryOrders.length > 0}}">发运详情</view>
  <view class="delivery-list" wx:if="{{deliveryOrders.length > 0}}">
    <view class="delivery-card" wx:for="{{deliveryOrders}}" wx:key="index" wx:for-item="delivery">
      <view class="delivery-header">
        <text class="date">发货记录 {{index + 1}}</text>
      </view>
      
      <view class="delivery-info">
        <view class="info-row">
          <text class="label">发货日期</text>
          <text class="val">{{delivery.deliveryDate}}</text>
        </view>
        <view class="info-row">
          <text class="label">物流公司</text>
          <text class="val">{{delivery.logisticsCompany}}</text>
        </view>
        <view class="info-row" wx:if="{{delivery.logisticsCode}}">
          <text class="label">物流单号</text>
          <text class="val copyable">{{delivery.logisticsCode}}</text>
        </view>
        <view class="info-row" wx:if="{{delivery.address}}">
          <text class="label">收货地址</text>
          <text class="val">{{delivery.address}}</text>
        </view>
        <view class="info-row" wx:if="{{delivery.remark}}">
          <text class="label">备注信息</text>
          <text class="val">{{delivery.remark}}</text>
        </view>
      </view>
      <view class="delivery-attachments" wx:if="{{delivery.attachments.length > 0}}">
        <text class="att-title">附件：</text>
        <view class="att-list">
          <image 
            wx:for="{{delivery.attachments}}" 
            wx:key="*this" 
            wx:for-item="imgUrl" 
            src="{{imgUrl}}" 
            mode="aspectFill" 
            class="att-img"
            data-url="{{imgUrl}}"
            data-urls="{{delivery.attachments}}"
            bindtap="onPreviewImage"
          ></image>
        </view>
      </view>
      <view class="delivery-products">
        <view class="products-title">产品清单</view>
        <view class="product-table">
          <view class="pt-header">
            <text class="col-name">产品名称</text>
            <text class="col-spec">规格</text>
            <text class="col-qty">数量</text>
          </view>
          <view class="pt-row" wx:for="{{delivery.products}}" wx:key="index" wx:for-item="prod">
            <view class="col-name">
              <text class="name-text">{{prod.productName}}</text>
            </view>
            <view class="col-spec">
              <text class="spec-tag" wx:if="{{prod.spec}}">{{prod.spec}}</text>
            </view>
            <text class="col-qty">{{prod.quantity}}</text>
          </view>
        </view>
      </view>

      
    </view>
  </view>
</view>

<view class="loading-overlay" wx:if="{{isLoading}}">
  <view class="loading-content"><text>加载中...</text></view>
</view>

